@inject SoundCore.Application.Contracts.DataServices.IRoomsDataService _roomService
@inject SoundCore.Application.Contracts.DataServices.IAppointmentDataService _appointmentService
@inject SoundCore.BlazorComponents.Features.Navigation.SideMenu.Services.ISideMenuService _sideMenuService;

@using Domain.Entities

@page "/"




@if (Rooms != null)
{
    @foreach (var item in Rooms)
    {
        <RoomCard Room="item"></RoomCard>
    }

}




@code{

    IEnumerable<Room> Rooms { get; set; }

    IEnumerable<Appointment> Appointments { get; set; }


    @code{
        protected async override Task OnInitializedAsync()
        {
            await _sideMenuService.HomeButtonClicked();
            //   return base.OnInitializedAsync();
        }
    }

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            Rooms = await _roomService.ListAllAsync();
            Appointments = await _appointmentService.ListAllAsync();
            this.StateHasChanged();
        }

    }
}